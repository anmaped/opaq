(function(){"use strict";var t=this,i=t.Chart,e=function(t){this.canvas=t.canvas,this.ctx=t;var i=function(t,i){return t["offset"+i]?t["offset"+i]:document.defaultView.getComputedStyle(t).getPropertyValue(i)},e=this.width=i(t.canvas,"Width"),s=this.height=i(t.canvas,"Height");t.canvas.width=e,t.canvas.height=s;var e=this.width=t.canvas.width,s=this.height=t.canvas.height;return this.aspectRatio=2,this.width/this.height,n.retinaScale(this),this};e.defaults={global:{showScale:!0,scaleOverride:!0,scaleSteps:5,scaleStepWidth:20,scaleStartValue:0,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:3,scaleShowLabels:!0,scaleLabel:"<%=value%>%",scaleIntegersOnly:!0,scaleBeginAtZero:!0,scaleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",responsive:!0,maintainAspectRatio:!0}},e.types={};{var n=e.helpers={},s=n.each=function(t,i,e){var n=Array.prototype.slice.call(arguments,3);if(t)if(t.length===+t.length){var s;for(s=0;s<t.length;s++)i.apply(e,[t[s],s].concat(n))}else for(var a in t)i.apply(e,[t[a],a].concat(n))},a=n.clone=function(t){var i={};return s(t,function(e,n){t.hasOwnProperty(n)&&(i[n]=e)}),i},o=n.extend=function(t){return s(Array.prototype.slice.call(arguments,1),function(i){s(i,function(e,n){i.hasOwnProperty(n)&&(t[n]=e)})}),t},h=n.merge=function(){var t=Array.prototype.slice.call(arguments,0);return t.unshift({}),o.apply(null,t)},l=(n.indexOf=function(t,i){if(Array.prototype.indexOf)return t.indexOf(i);for(var e=0;e<t.length;e++)if(t[e]===i)return e;return-1},n.where=function(t,i){var e=[];return n.each(t,function(t){i(t)&&e.push(t)}),e},n.findNextWhere=function(t,i,e){e||(e=-1);for(var n=e+1;n<t.length;n++){var s=t[n];if(i(s))return s}},n.findPreviousWhere=function(t,i,e){e||(e=t.length);for(var n=e-1;n>=0;n--){var s=t[n];if(i(s))return s}},n.inherits=function(t){var i=this,e=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return i.apply(this,arguments)},n=function(){this.constructor=e};return n.prototype=i.prototype,e.prototype=new n,e.extend=l,t&&o(e.prototype,t),e.__super__=i.prototype,e}),r=n.noop=function(){},c=n.uid=function(){var t=0;return function(){return"chart-"+t++}}(),u=n.warn=function(t){window.console&&"function"==typeof window.console.warn&&console.warn(t)},d=n.amd="function"==typeof define&&define.amd,p=n.isNumber=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},f=n.max=function(t){return Math.max.apply(Math,t)},v=n.min=function(t){return Math.min.apply(Math,t)},g=(n.cap=function(t,i,e){if(p(i)){if(t>i)return i}else if(p(e)&&e>t)return e;return t},n.getDecimalPlaces=function(t){return t%1!==0&&p(t)?t.toString().split(".")[1].length:0}),y=n.radians=function(t){return t*(Math.PI/180)},x=(n.getAngleFromPoint=function(t,i){var e=i.x-t.x,n=i.y-t.y,s=Math.sqrt(e*e+n*n),a=2*Math.PI+Math.atan2(n,e);return 0>e&&0>n&&(a+=2*Math.PI),{angle:a,distance:s}},n.aliasPixel=function(t){return t%2===0?0:.5}),P=(n.splineCurve=function(t,i,e,n){var s=Math.sqrt(Math.pow(i.x-t.x,2)+Math.pow(i.y-t.y,2)),a=Math.sqrt(Math.pow(e.x-i.x,2)+Math.pow(e.y-i.y,2)),o=n*s/(s+a),h=n*a/(s+a);return{inner:{x:i.x-o*(e.x-t.x),y:i.y-o*(e.y-t.y)},outer:{x:i.x+h*(e.x-t.x),y:i.y+h*(e.y-t.y)}}},n.calculateOrderOfMagnitude=function(t){return Math.floor(Math.log(t)/Math.LN10)}),m=(n.calculateScaleRange=function(t,i,e,n,s){var a=2,o=Math.floor(i/(1.5*e)),h=a>=o,l=f(t),r=v(t);l===r&&(l+=.5,r>=.5&&!n?r-=.5:l+=.5);for(var c=Math.abs(l-r),u=P(c),d=Math.ceil(l/(1*Math.pow(10,u)))*Math.pow(10,u),p=n?0:Math.floor(r/(1*Math.pow(10,u)))*Math.pow(10,u),g=d-p,y=Math.pow(10,u),x=Math.round(g/y);(x>o||o>2*x)&&!h;)if(x>o)y*=2,x=Math.round(g/y),x%1!==0&&(h=!0);else if(s&&u>=0){if(y/2%1!==0)break;y/=2,x=Math.round(g/y)}else y/=2,x=Math.round(g/y);return h&&(x=a,y=g/x),{steps:x,stepValue:y,min:p,max:p+x*y}},n.template=function(t,i){function e(t,i){var e=/\W/.test(t)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+t.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):n[t]=n[t];return i?e(i):e}if(t instanceof Function)return t(i);var n={};return e(t,i)}),b=(n.generateLabels=function(t,i,e,n){var a=new Array(i);return labelTemplateString&&s(a,function(i,s){a[s]=m(t,{value:e+n*(s+1)})}),a},n.getRelativePosition=function(t){var i,e,n=t.originalEvent||t,s=t.currentTarget||t.srcElement,a=s.getBoundingClientRect();return n.touches?(i=n.touches[0].clientX-a.left,e=n.touches[0].clientY-a.top):(i=n.clientX-a.left,e=n.clientY-a.top),{x:i,y:e}},n.addEvent=function(t,i,e){t.addEventListener?t.addEventListener(i,e):t.attachEvent?t.attachEvent("on"+i,e):t["on"+i]=e}),w=n.removeEvent=function(t,i,e){t.removeEventListener?t.removeEventListener(i,e,!1):t.detachEvent?t.detachEvent("on"+i,e):t["on"+i]=r},L=(n.bindEvents=function(t,i,e){t.events||(t.events={}),s(i,function(i){t.events[i]=function(){e.apply(t,arguments)},b(t.chart.canvas,i,t.events[i])})},n.unbindEvents=function(t,i){s(i,function(i,e){w(t.chart.canvas,e,i)})}),S=n.getMaximumWidth=function(t){var i=t.parentNode;return i.clientWidth},C=n.getMaximumHeight=function(t){var i=t.parentNode;return i.clientHeight},R=(n.getMaximumSize=n.getMaximumWidth,n.retinaScale=function(t){var i=t.ctx,e=t.canvas.width,n=t.canvas.height;window.devicePixelRatio&&(i.canvas.style.width=e+"px",i.canvas.style.height=n+"px",i.canvas.height=n*window.devicePixelRatio,i.canvas.width=e*window.devicePixelRatio,i.scale(window.devicePixelRatio,window.devicePixelRatio))}),W=n.clear=function(t){t.ctx.clearRect(0,0,t.width,t.height)},M=(n.fontString=function(t,i,e){return i+" "+t+"px "+e},n.longestText=function(t,i,e){t.font=i;var n=0;return s(e,function(i){var e=t.measureText(i).width;n=e>n?e:n}),n});n.drawRoundedRectangle=function(t,i,e,n,s,a){t.beginPath(),t.moveTo(i+a,e),t.lineTo(i+n-a,e),t.quadraticCurveTo(i+n,e,i+n,e+a),t.lineTo(i+n,e+s-a),t.quadraticCurveTo(i+n,e+s,i+n-a,e+s),t.lineTo(i+a,e+s),t.quadraticCurveTo(i,e+s,i,e+s-a),t.lineTo(i,e+a),t.quadraticCurveTo(i,e,i+a,e),t.closePath()}}e.instances={},e.Type=function(t,i,n){this.options=i,this.chart=n,this.id=c(),e.instances[this.id]=this,i.responsive&&this.resize(),this.initialize.call(this,t)},o(e.Type.prototype,{initialize:function(){return this},clear:function(){return W(this.chart),this},stop:function(){return this},resize:function(t){this.stop();var i=this.chart.canvas,e=S(this.chart.canvas),n=C(this.chart.canvas)-300,s=this.options.maintainAspectRatio?n>e/this.chart.aspectRatio?e/this.chart.aspectRatio:n:C(this.chart.canvas),a=e;return i.width=this.chart.width=a,i.height=this.chart.height=s,R(this.chart),"function"==typeof t&&t.apply(this,Array.prototype.slice.call(arguments,1)),this},reflow:r,render:function(t){return t&&this.reflow(),this.draw(),this},generateLegend:function(){return m(this.options.legendTemplate,this)},destroy:function(){this.clear(),L(this,this.events);var t=this.chart.canvas;t.width=this.chart.width,t.height=this.chart.height,t.style.removeProperty?(t.style.removeProperty("width"),t.style.removeProperty("height")):(t.style.removeAttribute("width"),t.style.removeAttribute("height")),delete e.instances[this.id]},toBase64Image:function(){return this.chart.canvas.toDataURL.apply(this.chart.canvas,arguments)}}),e.Type.extend=function(t){var i=this,n=function(){return i.apply(this,arguments)};if(n.prototype=a(i.prototype),o(n.prototype,t),n.extend=e.Type.extend,t.name||i.prototype.name){var s=t.name||i.prototype.name,l=e.defaults[i.prototype.name]?a(e.defaults[i.prototype.name]):{};e.defaults[s]=o(l,t.defaults),e.types[s]=n,e.prototype[s]=function(t,i){var a=h(e.defaults.global,e.defaults[s],i||{});return new n(t,a,this)}}else u("Name not provided for this chart, so it hasn't been registered");return i},e.Element=function(t){o(this,t),this.initialize.apply(this,arguments),this.save()},o(e.Element.prototype,{initialize:function(){},restore:function(t){return t?s(t,function(t){this[t]=this._saved[t]},this):o(this,this._saved),this},save:function(){return this._saved=a(this),delete this._saved._saved,this},update:function(t){return s(t,function(t,i){this._saved[i]=this[i],this[i]=t},this),this},transition:function(t,i){return s(t,function(t,e){this[e]=(t-this._saved[e])*i+this._saved[e]},this),this},tooltipPosition:function(){return{x:this.x,y:this.y}},hasValue:function(){return p(this.value)}}),e.Element.extend=l,e.Point=e.Element.extend({display:!0,inRange:function(t,i){var e=this.hitDetectionRadius+this.radius;return Math.pow(t-this.x,2)+Math.pow(i-this.y,2)<Math.pow(e,2)},draw:function(){if(this.display){var t=this.ctx;t.beginPath(),t.arc(this.x,this.y,this.radius,0,2*Math.PI),t.closePath(),t.strokeStyle=this.strokeColor,t.lineWidth=this.strokeWidth,t.fillStyle=this.fillColor,t.fill(),t.stroke()}}}),e.Scale=e.Element.extend({initialize:function(){this.fit()},buildYLabels:function(){this.yLabels=[];for(var t=g(this.stepValue),i=0;i<=this.steps;i++)this.yLabels.push(m(this.templateString,{value:(this.min+i*this.stepValue).toFixed(t)}));this.yLabelWidth=this.display&&this.showLabels?M(this.ctx,this.font,this.yLabels):0},addXLabel:function(t){this.xLabels.push(t),this.valuesCount++,this.fit()},removeXLabel:function(){this.xLabels.shift(),this.valuesCount--,this.fit()},fit:function(){this.startPoint=this.display?this.fontSize:0,this.endPoint=this.display?this.height-1.5*this.fontSize-5:this.height,this.startPoint+=this.padding,this.endPoint-=this.padding;var t,i=this.endPoint-this.startPoint;for(this.calculateYRange(i),this.buildYLabels(),this.calculateXLabelRotation();i>this.endPoint-this.startPoint;)i=this.endPoint-this.startPoint,t=this.yLabelWidth,this.calculateYRange(i),this.buildYLabels(),t<this.yLabelWidth&&this.calculateXLabelRotation()},calculateXLabelRotation:function(){this.ctx.font=this.font;var t,i,e=this.ctx.measureText(this.xLabels[0]).width,n=this.ctx.measureText(this.xLabels[this.xLabels.length-1]).width;if(this.xScalePaddingRight=n/2+3,this.xScalePaddingLeft=e/2>this.yLabelWidth+10?e/2:this.yLabelWidth+10,this.xLabelRotation=0,this.display){var s,a=M(this.ctx,this.font,this.xLabels);this.xLabelWidth=a;for(var o=Math.floor(this.calculateX(1)-this.calculateX(0))-6;this.xLabelWidth>o&&0===this.xLabelRotation||this.xLabelWidth>o&&this.xLabelRotation<=90&&this.xLabelRotation>0;)s=Math.cos(y(this.xLabelRotation)),t=s*e,i=s*n,t+this.fontSize/2>this.yLabelWidth+8&&(this.xScalePaddingLeft=t+this.fontSize/2),this.xScalePaddingRight=this.fontSize/2,this.xLabelRotation++,this.xLabelWidth=s*a;this.xLabelRotation>0&&(this.endPoint-=Math.sin(y(this.xLabelRotation))*a+3)}else this.xLabelWidth=0,this.xScalePaddingRight=this.padding,this.xScalePaddingLeft=this.padding},calculateYRange:r,drawingArea:function(){return this.startPoint-this.endPoint},calculateY:function(t){var i=this.drawingArea()/(this.min-this.max);return this.endPoint-i*(t-this.min)},calculateYREV:function(t){var i=this.drawingArea()/(this.min-this.max);return(this.endPoint-t)/i+this.min},calculateX:function(t){var i=(this.xLabelRotation>0,this.width-(this.xScalePaddingLeft+this.xScalePaddingRight)),e=i/Math.max(this.valuesCount-(this.offsetGridLines?0:1),1),n=e*t+this.xScalePaddingLeft;return n},calculateXREVS:function(t){var i=this.width-(this.xScalePaddingLeft+this.xScalePaddingRight),e=i/Math.max(this.valuesCount-(this.offsetGridLines?0:1),1),n=(t-this.xScalePaddingLeft)/e;return n},update:function(t){n.extend(this,t),this.fit()},draw:function(){var t=this.ctx,i=(this.endPoint-this.startPoint)/this.steps,e=Math.round(this.xScalePaddingLeft);this.display&&(t.fillStyle=this.textColor,t.font=this.font,s(this.yLabels,function(s,a){var o=this.endPoint-i*a,h=Math.round(o),l=this.showHorizontalLines;t.textAlign="right",t.textBaseline="middle",this.showLabels&&t.fillText(s,e-10,o),0!==a||l||(l=!0),l&&t.beginPath(),a>0?(t.lineWidth=this.gridLineWidth,t.strokeStyle=this.gridLineColor):(t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor),h+=n.aliasPixel(t.lineWidth),l&&(t.moveTo(e,h),t.lineTo(this.width,h),t.stroke(),t.closePath()),t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor,t.beginPath(),t.moveTo(e-5,h),t.lineTo(e,h),t.stroke(),t.closePath()},this),s(this.xLabels,function(i,e){var n=this.calculateX(e)+x(this.lineWidth),s=this.calculateX(e-(this.offsetGridLines?.5:0))+x(this.lineWidth),a=this.xLabelRotation>0,o=this.showVerticalLines;0!==e||o||(o=!0),o&&t.beginPath(),e>0?(t.lineWidth=this.gridLineWidth,t.strokeStyle=this.gridLineColor):(t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor),o&&(t.moveTo(s,this.endPoint),t.lineTo(s,this.startPoint-3),t.stroke(),t.closePath()),t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor,t.beginPath(),t.moveTo(s,this.endPoint),t.lineTo(s,this.endPoint+5),t.stroke(),t.closePath(),t.save(),t.translate(n,a?this.endPoint+12:this.endPoint+8),t.rotate(-1*y(this.xLabelRotation)),t.font=this.font,t.textAlign=a?"right":"center",t.textBaseline=a?"middle":"top",t.fillText(i,0,0),t.restore()},this))}}),n.addEvent(window,"resize",function(){var t;return function(){clearTimeout(t),t=setTimeout(function(){s(e.instances,function(t){t.options.responsive&&t.resize(t.render,!0)})},50)}}()),d?define(function(){return e}):"object"==typeof module&&module.exports&&(module.exports=e),t.Chart=e,e.noConflict=function(){return t.Chart=i,e}}).call(this),function(){"use strict";var t=this,i=t.Chart,e=i.helpers,n={scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!1,scaleShowVerticalLines:!0,bezierCurve:!0,bezierCurveTension:.3,pointDot:!0,pointDotRadius:4,pointDotStrokeWidth:1,pointHitDetectionRadius:2,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'};i.Type.extend({name:"Line",defaults:n,initialize:function(t){this.PointClass=i.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx}),this.datasets=[];var n=!1,s=null,a=null;e.bindEvents(this,["mousedown","mouseup","mousemove"],function(i){if("mousedown"==i.type){var o=this.getPointsAtEvent(i);this.eachPoints(function(t){t.restore(["fillColor","strokeColor"])}),e.each(o,function(t){t.fillColor=t.highlightFill,t.strokeColor=t.highlightStroke,s=t}),n=!0}if("mousemove"==i.type&&n&&null!=s){s.radius=5,this.scale.calculateYREV(i.layerY)<=100&&this.scale.calculateYREV(i.layerY)>=0&&(s.value=this.scale.calculateYREV(i.layerY)),this.scale.calculateXREVS(i.layerX)*s.step>=0&&(s.value2=this.scale.calculateXREVS(i.layerX)*s.step);var h,l=1,r=1;e.each(this.datasets,function(t){r=1,e.each(t.points,function(i){1==r&&(h=i),r!=t.points.length||i!=s&&s!=h||(i.value2=24,i.value=h.value,h.value2=0,a=i),r+=1}),l+=1}),this.draw()}if("mouseup"==i.type&&null!=s){s.radius=4,this.draw(),n=!1;var c=new XMLHttpRequest;c.open("GET","light?sigdev="+t.device+"&asigid="+s.external_data[0]+"&asigpt="+s.external_data[1]+"&asigxy=0&asigvalue="+255*(Number(s.value.toFixed(1))-0)/100,!1),c.send(null),c.open("GET","light?sigdev="+t.device+"&asigid="+s.external_data[0]+"&asigpt="+s.external_data[1]+"&asigxy=1&asigvalue="+255*(Number(s.value2.toFixed(1))-0)/24,!1),c.send(null),null!=a&&(c.open("GET","light?sigdev="+t.device+"&asigid="+a.external_data[0]+"&asigpt="+a.external_data[1]+"&asigxy=0&asigvalue="+255*(Number(a.value.toFixed(1))-0)/100,!1),c.send(null),c.open("GET","light?sigdev="+t.device+"&asigid="+a.external_data[0]+"&asigpt="+a.external_data[1]+"&asigxy=1&asigvalue="+255*(Number(a.value2.toFixed(1))-0)/24,!1),c.send(null)),s=null,a=null}}),e.each(t.datasets,function(i){var n={label:i.label||null,fillColor:i.fillColor,strokeColor:i.strokeColor,pointColor:i.pointColor,pointStrokeColor:i.pointStrokeColor,points:[]};this.datasets.push(n),e.each(i.data,function(e,s){var a=e[0];n.points.push(new this.PointClass({value:a/255*100,value2:e[1]/255*24,external_data:e[2],step:t.labelsspace,label:t.labels[s],datasetLabel:i.label,strokeColor:i.pointStrokeColor,fillColor:i.pointColor,highlightFill:i.pointHighlightFill||i.pointColor,highlightStroke:i.pointHighlightStroke||i.pointStrokeColor}))},this),this.buildScale(t.labels),this.eachPoints(function(t,i){e.extend(t,{x:this.scale.calculateX(i),y:this.scale.endPoint}),t.save()},this)},this),this.render()},update:function(){this.scale.update(),e.each(this.activeElements,function(t){t.restore(["fillColor","strokeColor"])}),this.eachPoints(function(t){t.save()}),this.render()},eachPoints:function(t){e.each(this.datasets,function(i){e.each(i.points,t,this)},this)},getPointsAtEvent:function(t){var i=[],n=e.getRelativePosition(t);return e.each(this.datasets,function(t){e.each(t.points,function(t){t.inRange(n.x,n.y)&&i.push(t)})},this),i},buildScale:function(t){var n=this,s=function(){var t=[];return n.eachPoints(function(i){t.push(i.value)}),t},a={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:t.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(t){var i=e.calculateScaleRange(s(),t,this.fontSize,this.beginAtZero,this.integersOnly);e.extend(this,i)},xLabels:t,font:e.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,showHorizontalLines:this.options.scaleShowHorizontalLines,showVerticalLines:this.options.scaleShowVerticalLines,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.pointDotRadius+this.options.pointDotStrokeWidth,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&e.extend(a,{calculateYRange:e.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}),this.scale=new i.Scale(a)},addData:function(t,i){e.each(t,function(t,e){this.datasets[e].points.push(new this.PointClass({value:t,label:i,x:this.scale.calculateX(this.scale.valuesCount+1),y:this.scale.endPoint,strokeColor:this.datasets[e].pointStrokeColor,fillColor:this.datasets[e].pointColor}))},this),this.scale.addXLabel(i),this.update()},removeData:function(){this.scale.removeXLabel(),e.each(this.datasets,function(t){t.points.shift()},this),this.update()},draw:function(t){var i=t||1;this.clear();var n=this.chart.ctx,s=function(t){return null!==t.value},a=function(t,i,n){return e.findNextWhere(i,s,n)||t},o=function(t,i,n){return e.findPreviousWhere(i,s,n)||t};this.scale.draw(i),e.each(this.datasets,function(t){var h=e.where(t.points,s);e.each(t.points,function(t){t.hasValue()&&t.transition({y:this.scale.calculateY(t.value),x:this.scale.calculateX(t.value2/t.step)},i)},this),this.options.bezierCurve&&e.each(h,function(t,i){var n=i>0&&i<h.length-1?this.options.bezierCurveTension:0;t.controlPoints=e.splineCurve(o(t,h,i),t,a(t,h,i),n),t.controlPoints.outer.y>this.scale.endPoint?t.controlPoints.outer.y=this.scale.endPoint:t.controlPoints.outer.y<this.scale.startPoint&&(t.controlPoints.outer.y=this.scale.startPoint),t.controlPoints.inner.y>this.scale.endPoint?t.controlPoints.inner.y=this.scale.endPoint:t.controlPoints.inner.y<this.scale.startPoint&&(t.controlPoints.inner.y=this.scale.startPoint)},this),n.lineWidth=this.options.datasetStrokeWidth,n.strokeStyle=t.strokeColor,n.beginPath(),e.each(h,function(t,i){if(0===i)n.moveTo(t.x,t.y);else if(this.options.bezierCurve){var e=o(t,h,i);n.bezierCurveTo(e.controlPoints.outer.x,e.controlPoints.outer.y,t.controlPoints.inner.x,t.controlPoints.inner.y,t.x,t.y)}else n.lineTo(t.x,t.y)},this),n.stroke(),this.options.datasetFill&&h.length>0&&(n.lineTo(h[h.length-1].x,this.scale.endPoint),n.lineTo(h[0].x,this.scale.endPoint),n.fillStyle=t.fillColor,n.closePath(),n.fill()),e.each(h,function(t){t.draw()})},this)}})}.call(this);